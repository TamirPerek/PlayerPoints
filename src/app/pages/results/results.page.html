<main class="page">
  <app-header
    [title]="'results.title' | translate"
    [subtitle]="'results.subtitle' | translate"
    [showBackButton]="true">
  </app-header>

  @if (game.players.length) {
    <app-card>
      <h2>{{ 'results.scoreboard' | translate }}</h2>
      <div class="scores">
        @for (player of sortedPlayers(); track player; let i = $index) {
          <div class="score-row">
            @if (player.id === winner()?.player?.id) {
              <div class="winner-name">
                <strong>{{i + 1}}. {{ player.name }}</strong>
              </div>
            } @else {
              <div class="player-name">{{i + 1}}. {{ player.name }}</div>
            }
            <div class="score-value">{{ totals()[player.id] }}</div>
          </div>
        }
      </div>
      @if (winner(); as w) {
        <div class="winner">
          <p>{{ 'results.winner' | translate: {name: w.player.name, score: w.score} }}</p>
        </div>
      }
      <app-button (click)="reset()" (keydown)="reset()" buttonClass="alert">{{ 'results.newGame' | translate }}
      </app-button>
    </app-card>
  } @else {
    <div class="card muted">{{ 'results.empty' | translate }}</div>
  }
</main>
